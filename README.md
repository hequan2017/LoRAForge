# LoRAForge (äº‘èµ„æºé”»é€ å¹³å°)

<div align="center">

![LoRAForge Logo](docs/gin-vue-admin.png)

åŸºäº Gin-Vue-Admin æ¡†æ¶å¼€å‘çš„ä¸€ç«™å¼äº‘èµ„æºç®¡ç†ç³»ç»Ÿ

[![Go](https://img.shields.io/badge/Go-1.23+-00ADD8?style=flat&logo=go)](https://golang.org/)
[![Vue](https://img.shields.io/badge/Vue-3.5+-4FC08D?style=flat&logo=vue.js)](https://vuejs.org/)
[![Gin](https://img.shields.io/badge/Gin-1.10+-00A8E1?style=flat)](https://gin-gonic.com/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

</div>

---

## ğŸ“Œ é¡¹ç›®ç®€ä»‹

**LoRAForge** æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„äº‘èµ„æºç®¡ç†å¹³å°ï¼Œæ—¨åœ¨æä¾›å®Œæ•´çš„äº‘ä¸»æœºç”Ÿå‘½å‘¨æœŸç®¡ç†è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡ç›´è§‚çš„ Web ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾ç®¡ç†ç®—åŠ›èŠ‚ç‚¹ã€å®šä¹‰äº§å“è§„æ ¼ã€ç®¡ç†é•œåƒåº“ï¼Œå¹¶é€šè¿‡å†…ç½®çš„ **WebSSH ç»ˆç«¯**ç›´æ¥è®¿é—®äº‘ä¸»æœºå®ä¾‹ã€‚

### æ ¸å¿ƒä»·å€¼

- **å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†** - ä»å®ä¾‹åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢åˆ°åˆ é™¤çš„å®Œæ•´æµç¨‹
- **èµ„æºé«˜æ•ˆåˆ©ç”¨** - æ™ºèƒ½è°ƒåº¦ç®—åŠ›èŠ‚ç‚¹ï¼Œæœ€å¤§åŒ–èµ„æºåˆ©ç”¨ç‡
- **å®‰å…¨å¯æ§** - æ”¯æŒ Docker TLS åŠ å¯†è¿æ¥ï¼Œç»†ç²’åº¦æƒé™æ§åˆ¶
- **å¼€ç®±å³ç”¨** - å®Œå–„çš„åˆå§‹åŒ–æœºåˆ¶ï¼Œè‡ªåŠ¨æ³¨å†Œ API å’Œèœå•

---

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. â˜ï¸ äº‘èµ„æºç®¡ç† (Cloud Resource Management)

æœ¬é¡¹ç›®æ–°å¢äº† `cloud` åŒ…ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒä¸šåŠ¡æ¨¡å—ï¼š

#### ğŸ–¥ï¸ å®ä¾‹ç®¡ç† (Instance Management)

ç”¨æˆ·è´­ä¹°å’Œä½¿ç”¨çš„äº‘ä¸»æœºå®ä¾‹å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚

| åŠŸèƒ½ | æè¿° |
|------|------|
| **åˆ›å»ºå®ä¾‹** | åŸºäºé•œåƒå’Œäº§å“è§„æ ¼å¿«é€Ÿåˆ›å»ºå®¹å™¨å®ä¾‹ |
| **å®ä¾‹æ§åˆ¶** | å¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€åˆ é™¤å®ä¾‹ |
| **çŠ¶æ€ç›‘æ§** | å®æ—¶æ˜¾ç¤ºå®¹å™¨è¿è¡ŒçŠ¶æ€å’Œèµ„æºä½¿ç”¨æƒ…å†µ |
| **WebSSH** | å†…ç½® Web ç»ˆç«¯ï¼Œç›´æ¥è®¿é—®å®¹å™¨ Shell |
| **è‡ªåŠ¨å¡«å……** | åç«¯è‡ªåŠ¨å…³è”å½“å‰ç”¨æˆ·IDå’Œå®¹å™¨ä¿¡æ¯ |

**å…³è”å…³ç³»**ï¼š
```
Instance (1:1) â†’ MirrorRepository (é•œåƒåº“)
Instance (1:1) â†’ ProductSpec (äº§å“è§„æ ¼)
Instance (1:1) â†’ ComputeNode (ç®—åŠ›èŠ‚ç‚¹)
```

#### ğŸ“ äº§å“è§„æ ¼ (Product Specifications)

å®šä¹‰äº‘äº§å“çš„ç¡¬ä»¶è§„æ ¼å’Œå®šä»·ç­–ç•¥ã€‚

**å­—æ®µé…ç½®**ï¼š
- åç§°ã€æè¿°
- æ˜¾å¡å‹å· / æ•°é‡ (å¦‚ NVIDIA RTX 4090 x4)
- CPU æ ¸å¿ƒæ•°
- å†…å­˜å®¹é‡ (GB)
- ç³»ç»Ÿç›˜ / æ•°æ®ç›˜å®¹é‡ (GB)
- ä»·æ ¼ (å…ƒ/å°æ—¶)

**ç‰¹æ€§**ï¼šæ”¯æŒä¸Šæ¶/ä¸‹æ¶ç®¡ç†ï¼Œçµæ´»æ§åˆ¶äº§å“å¯ç”¨æ€§

#### ğŸ’» ç®—åŠ›èŠ‚ç‚¹ (Compute Nodes)

ç®¡ç†åº•å±‚çš„è®¡ç®—èµ„æºèŠ‚ç‚¹ï¼Œæ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ã€‚

**å­—æ®µé…ç½®**ï¼š
- åŒºåŸŸã€åç§°ã€æè¿°
- IP é…ç½® (å…¬ç½‘ IP / å†…ç½‘ IP)
- SSH ç«¯å£ã€Docker API ç«¯å£
- ç¡¬ä»¶é…ç½® (CPU / å†…å­˜ / æ˜¾å¡)

**å®‰å…¨è¿æ¥**ï¼š
- âœ… æ”¯æŒ Docker TLS åŠ å¯†è¿æ¥
- âœ… è¯ä¹¦ç®¡ç†é‡‡ç”¨é•¿æ–‡æœ¬è¾“å…¥ (CAè¯ä¹¦ã€å®¢æˆ·ç«¯è¯ä¹¦ã€ç§é’¥)
- âœ… è¿æ¥æµ‹è¯•åŠŸèƒ½

#### ğŸ’¿ é•œåƒåº“ (Mirror Repository)

ç®¡ç†å¯ç”¨çš„æ“ä½œç³»ç»Ÿæˆ–åº”ç”¨é•œåƒã€‚

**å­—æ®µé…ç½®**ï¼š
- é•œåƒåç§°ã€åœ°å€
- é•œåƒæ¥æº (å®˜æ–¹ / è‡ªå»º)
- æè¿°ä¿¡æ¯

**ç‰¹æ€§**ï¼šæ”¯æŒä¸Šæ¶/ä¸‹æ¶ç®¡ç†ï¼Œæ§åˆ¶é•œåƒå¯ç”¨æ€§

### 2. ğŸ–¥ï¸ WebSSH ç»ˆç«¯

åŸºäº WebSocket çš„ Web ç»ˆç«¯åŠŸèƒ½ï¼Œæ— éœ€å®‰è£… SSH å®¢æˆ·ç«¯å³å¯è®¿é—®å®¹å™¨ã€‚

**æ ¸å¿ƒç‰¹æ€§**ï¼š
- ğŸ”’ å®‰å…¨è¿æ¥ - é€šè¿‡ WebSocket å»ºç«‹åŠ å¯†ç»ˆç«¯ä¼šè¯
- ğŸ“± å“åº”å¼ - è‡ªåŠ¨é€‚é…ç»ˆç«¯çª—å£å¤§å°
- ğŸ’“ å¿ƒè·³ä¿æ´» - è‡ªåŠ¨æ£€æµ‹è¿æ¥çŠ¶æ€ï¼Œé˜²æ­¢æ„å¤–æ–­å¼€
- ğŸ§¹ ä¼šè¯ç®¡ç† - è‡ªåŠ¨æ¸…ç†è¶…æ—¶ä¼šè¯ (é»˜è®¤30åˆ†é’Ÿ)
- ğŸ¨ å½©è‰²ç»ˆç«¯ - æ”¯æŒ xterm-256color å®Œæ•´è‰²å½©

**æŠ€æœ¯å®ç°**ï¼š
- åç«¯ï¼šGorilla WebSocket + Docker Exec API
- å‰ç«¯ï¼šxterm.js ç»ˆç«¯æ¨¡æ‹Ÿå™¨
- åŒå‘æ•°æ®æµï¼šWebSocket è¾“å…¥ â‡„ Docker å®¹å™¨è¾“å‡º

---

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Go | 1.23+ | åç«¯å¼€å‘è¯­è¨€ |
| Gin | 1.10.0 | Web æ¡†æ¶ |
| GORM | 1.25.12 | ORM æ•°æ®åº“æ“ä½œ |
| Docker Client | - | å®¹å™¨ç®¡ç† API |
| Gorilla WebSocket | - | WebSocket é€šä¿¡ |
| Zap | 1.27.0 | ç»“æ„åŒ–æ—¥å¿— |
| Casbin | 2.103.0 | æƒé™æ§åˆ¶ |

### å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Vue | 3.5.7+ | å‰ç«¯æ¡†æ¶ |
| Vite | 6.2.3 | æ„å»ºå·¥å…· |
| Element Plus | 2.10.2 | UI ç»„ä»¶åº“ |
| Pinia | 2.2.2 | çŠ¶æ€ç®¡ç† |
| xterm.js | - | Web ç»ˆç«¯ç»„ä»¶ |
| UnoCSS | 66.4.2 | åŸå­åŒ– CSS |

### æ¶æ„ç‰¹æ€§

- **æ¨¡å—åŒ–è®¾è®¡**ï¼šä¸šåŠ¡é€»è¾‘ç‹¬ç«‹äº `cloud` åŒ…ä¸­ï¼Œä¸ä¾µå…¥ç³»ç»Ÿæ ¸å¿ƒä»£ç 
- **è‡ªåŠ¨åŒ–åˆå§‹åŒ–**ï¼šå®ç° `SubInitializer` æ¥å£ï¼Œæ”¯æŒé€šè¿‡ `gowatch` çƒ­ç¼–è¯‘è‡ªåŠ¨æ³¨å†Œ
- **åˆ†å±‚æ¶æ„**ï¼šä¸¥æ ¼éµå¾ª Model â†’ Service â†’ API â†’ Router åˆ†å±‚è®¾è®¡
- **ç»Ÿä¸€å“åº”**ï¼šæ ‡å‡†åŒ–çš„ JSON å“åº”æ ¼å¼

---

## ğŸ“‚ ç›®å½•ç»“æ„

```
LoRAForge/
â”œâ”€â”€ server/                          # åç«¯ Go é¡¹ç›®
â”‚   â”œâ”€â”€ api/v1/cloud/               # äº‘èµ„æº API æ¥å£å±‚
â”‚   â”‚   â”œâ”€â”€ compute_node.go         # ç®—åŠ›èŠ‚ç‚¹ API
â”‚   â”‚   â”œâ”€â”€ instance.go             # å®ä¾‹ç®¡ç† API
â”‚   â”‚   â”œâ”€â”€ mirror_repository.go    # é•œåƒåº“ API
â”‚   â”‚   â””â”€â”€ product_spec.go         # äº§å“è§„æ ¼ API
â”‚   â”œâ”€â”€ service/cloud/              # äº‘èµ„æºä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ computeNode.go          # ç®—åŠ›èŠ‚ç‚¹æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ instance.go             # å®ä¾‹ç®¡ç†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ webssh.go               # WebSSH ç»ˆç«¯æœåŠ¡
â”‚   â”‚   â””â”€â”€ ...                     # å…¶ä»–æœåŠ¡
â”‚   â”œâ”€â”€ model/cloud/                # äº‘èµ„æºæ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ compute_node.go         # ç®—åŠ›èŠ‚ç‚¹æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ instance.go             # å®ä¾‹æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ mirror_repository.go    # é•œåƒåº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ product_spec.go         # äº§å“è§„æ ¼æ¨¡å‹
â”‚   â”‚   â””â”€â”€ request/                # è¯·æ±‚ DTO
â”‚   â”œâ”€â”€ source/cloud/               # åˆå§‹åŒ–æ•°æ®
â”‚   â”‚   â”œâ”€â”€ api.go                  # API æƒé™åˆå§‹åŒ–
â”‚   â”‚   â””â”€â”€ menu.go                 # å‰ç«¯èœå•åˆå§‹åŒ–
â”‚   â””â”€â”€ config.yaml                 # é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ web/                            # å‰ç«¯ Vue é¡¹ç›®
â”‚   â””â”€â”€ src/view/cloud/             # äº‘èµ„æºé¡µé¢ç»„ä»¶
â”‚       â”œâ”€â”€ compute_node/           # ç®—åŠ›èŠ‚ç‚¹é¡µé¢
â”‚       â”œâ”€â”€ instance/               # å®ä¾‹ç®¡ç†é¡µé¢
â”‚       â”œâ”€â”€ mirror_repository/      # é•œåƒåº“é¡µé¢
â”‚       â””â”€â”€ product_spec/           # äº§å“è§„æ ¼é¡µé¢
â”‚
â””â”€â”€ deploy/                         # éƒ¨ç½²é…ç½®
    â”œâ”€â”€ docker/                     # Docker éƒ¨ç½²
    â”œâ”€â”€ docker-compose/             # Docker Compose éƒ¨ç½²
    â””â”€â”€ kubernetes/                 # Kubernetes éƒ¨ç½²
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Go 1.23+
- Node.js 18+
- MySQL 5.7+ / PostgreSQL 12+
- Redis 6+
- Docker (ç”¨äºç®—åŠ›èŠ‚ç‚¹)

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/LoRAForge.git
cd LoRAForge
```

### 2. å¯åŠ¨åç«¯

```bash
cd server

# å®‰è£…ä¾èµ–
go mod tidy

# ä¿®æ”¹é…ç½®æ–‡ä»¶
# ç¼–è¾‘ config.yamlï¼Œé…ç½®æ•°æ®åº“å’Œ Redis è¿æ¥ä¿¡æ¯

# å¯åŠ¨æœåŠ¡
go run main.go

# æˆ–ä½¿ç”¨ gowatch çƒ­åŠ è½½ï¼ˆæ¨èå¼€å‘ç¯å¢ƒï¼‰
gowatch
```

åç«¯é»˜è®¤è¿è¡Œåœ¨ `http://localhost:8888`

### 3. å¯åŠ¨å‰ç«¯

```bash
cd web

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯é»˜è®¤è¿è¡Œåœ¨ `http://localhost:8080`

### 4. è®¿é—®ç³»ç»Ÿ

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8080`

**é»˜è®¤è´¦å·**ï¼š
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`123456`

---

## ğŸ“¸ åŠŸèƒ½é¢„è§ˆ

### äº‘èµ„æºç®¡ç†

- ç®—åŠ›èŠ‚ç‚¹åˆ—è¡¨ - å±•ç¤ºæ‰€æœ‰å¯ç”¨çš„è®¡ç®—èµ„æºèŠ‚ç‚¹
- äº§å“è§„æ ¼ç®¡ç† - å®šä¹‰ä¸åŒæ¡£æ¬¡çš„äº‘ä¸»æœºè§„æ ¼
- é•œåƒåº“ç®¡ç† - ç®¡ç†å¯éƒ¨ç½²çš„ç³»ç»Ÿé•œåƒ
- å®ä¾‹ç®¡ç† - ç”¨æˆ·äº‘ä¸»æœºçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†

### WebSSH ç»ˆç«¯

![WebSSH](docs/webssh-preview.png)

> é€šè¿‡æµè§ˆå™¨ç›´æ¥è®¿é—®å®¹å™¨ç»ˆç«¯ï¼Œæ”¯æŒå…¨å½©æ˜¾ç¤ºå’Œçª—å£è‡ªé€‚åº”

---

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **RBAC æƒé™æ§åˆ¶** - åŸºäº Casbin çš„ç»†ç²’åº¦æƒé™ç®¡ç†
- **JWT è®¤è¯** - æ— çŠ¶æ€çš„ Token è®¤è¯æœºåˆ¶
- **Docker TLS** - ç®—åŠ›èŠ‚ç‚¹æ”¯æŒ TLS åŠ å¯†è¿æ¥
- **API æƒé™** - è‡ªåŠ¨æ³¨å†Œå¹¶æ§åˆ¶ API è®¿é—®æƒé™
- **æ“ä½œå®¡è®¡** - å®Œæ•´çš„æ“ä½œæ—¥å¿—è®°å½•

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºæ–°åŠŸèƒ½å»ºè®®ï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäº [MIT](LICENSE) åè®®å¼€æºã€‚

---

## ğŸ™ è‡´è°¢

- [gin-vue-admin](https://github.com/flipped-aurora/gin-vue-admin) - ä¼˜ç§€çš„å…¨æ ˆç®¡ç†æ¡†æ¶
- [Gin](https://github.com/gin-gonic/gin) - é«˜æ€§èƒ½ Go Web æ¡†æ¶
- [Vue.js](https://github.com/vuejs/vue) - æ¸è¿›å¼ JavaScript æ¡†æ¶
- [Element Plus](https://github.com/element-plus/element-plus) - ä¼˜ç§€çš„ Vue 3 UI ç»„ä»¶åº“
- [xterm.js](https://github.com/xtermjs/xterm.js) - å¼ºå¤§çš„ Web ç»ˆç«¯ç»„ä»¶

---

<div align="center">

**Built with â¤ï¸ by LoRAForge Team**

</div>
